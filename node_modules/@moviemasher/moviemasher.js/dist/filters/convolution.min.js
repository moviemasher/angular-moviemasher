"use strict";MovieMasher.Filter.register("convolution",{render:function(r,a,t){var i=function(r){for(var a,t,i,e,o={bias:{},rdiv:{},matrix:{}},n=0;n<4;n++){for(a=String(n),e="rgba"[n],o.matrix[e]=r[a+"m"].split(" "),i=o.matrix[e].length,t=0;t<i;t++)o.matrix[e][t]=parseInt(o.matrix[e][t]);o.rdiv[e]=r[a+"rdiv"]||1,-1<String(o.rdiv[e]).indexOf("/")?(o.rdiv[e]=o.rdiv[e].split("/"),o.rdiv[e]=parseFloat(o.rdiv[e][0])/parseFloat(o.rdiv[e][1])):o.rdiv[e]=parseFloat(o.rdiv[e]),o.bias[e]=r[a+"bias"]||0}return o}(t),e=r[0],o=e.canvas.width,n=e.canvas.height,v=e.context.getImageData(0,0,o,n).data,t=e.context.createImageData(o,n);return function(r,a,t,i,e){for(var o,n,v,d,s,g,m,x,c=i*e,f=0;f<c;f++)for(o=MovieMasher.Filter.rgb_matrix_from_pixel(f,a,i,e),m=0;m<4;m++){for(x="rgba"[m],d=r.rdiv[x],v=r.matrix[x],n=r.bias[x],g=s=0;g<9;g++)s+=o[g][x]*v[g];s=Math.floor(s*d+n+.5),t[4*f+m]=s}}(i,v,t.data,o,n),e.context.putImageData(t,0,0),r}});