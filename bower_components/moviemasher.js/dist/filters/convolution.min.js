"use strict";MovieMasher.Filter.register("convolution",{render:function(a,b,c){var d,e,f,g=function(a){var b,c,d,e,f,g={bias:{},rdiv:{},matrix:{}},h="rgba";for(e=0;e<4;e++){for(b=String(e),f=h[e],g.matrix[f]=a[b+"m"].split(" "),d=g.matrix[f].length,c=0;c<d;c++)g.matrix[f][c]=parseInt(g.matrix[f][c]);g.rdiv[f]=a[b+"rdiv"]||1,-1<String(g.rdiv[f]).indexOf("/")?(g.rdiv[f]=g.rdiv[f].split("/"),g.rdiv[f]=parseFloat(g.rdiv[f][0])/parseFloat(g.rdiv[f][1])):g.rdiv[f]=parseFloat(g.rdiv[f]),g.bias[f]=a[b+"bias"]||0}return g},h=function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p="rgba";for(n=d*e,f=0;f<n;f++)for(g=MovieMasher.Filter.rgb_matrix_from_pixel(f,b,d,e),m=0;m<4;m++){for(o=p[m],j=a.rdiv[o],i=a.matrix[o],h=a.bias[o],k=0,l=0;l<9;l++)k+=g[l][o]*i[l];k=Math.floor(k*j+h+.5),c[4*f+m]=k}},i=g(c),j=a[0];d=j.canvas.width,e=j.canvas.height,f=j.context.getImageData(0,0,d,e).data;var k=j.context.createImageData(d,e);return h(i,f,k.data,d,e),j.context.putImageData(k,0,0),a}});